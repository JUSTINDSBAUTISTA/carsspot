<h1>Cars</h1>
<p><%= pluralize(@cars.count, 'car') %> found</p>

<div class="filter-container" data-controller="date-picker car filter">
  <input type="text" class="search-input" placeholder="Specific address, station, subway station...">
  <div class="date-time-picker">
    <input type="text" data-date-picker-target="startDate" class="date-input" placeholder="Pickup Date">
    <input type="text" data-date-picker-target="startTime" class="time-input" placeholder="Pickup Time">
  </div>
  <div class="date-time-picker">
    <input type="text" data-date-picker-target="endDate" class="date-input" placeholder="Return Date">
    <input type="text" data-date-picker-target="endTime" class="time-input" placeholder="Return Time">
  </div>
  <div>
    <button class="filter-button dropdown-toggle" data-action="click->car#toggle">Vehicle type</button>
    <div class="dropdown-menu" data-car-target="menu">
      <h3>VEHICLE TYPE</h3>
      <div class="vehicle-types">
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Commercial">
          <i class="fas fa-truck"></i> Commercial
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="City">
          <i class="fas fa-car"></i> City
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Sedan">
          <i class="fas fa-car-side"></i> Sedan
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Family">
          <i class="fas fa-caravan"></i> Family
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Minibus">
          <i class="fas fa-shuttle-van"></i> Minibus
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="4x4">
          <i class="fas fa-car"></i> 4x4
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Convertible">
          <i class="fas fa-car"></i> Convertible
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Coupe">
          <i class="fas fa-car"></i> Coupe
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Antique">
          <i class="fas fa-car"></i> Antique
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="Campervan">
          <i class="fas fa-caravan"></i> Campervan
        </button>
        <button class="vehicle-type" data-action="click->car#selectType" data-type="SUV">
          <i class="fas fa-car"></i> SUV
        </button>
      </div>
      <div class="dropdown-actions">
        <button class="reset-button" data-action="click->car#resetFilters">Reset</button>
        <button class="apply-button" data-action="click->car#applyTypes">Apply</button>
      </div>
    </div>
  </div>
  <button class="filter-button">Reserved parking</button>
  <button class="filter-button" data-action="click->filter#toggle">More filters</button>
</div>

<div class="main-container">
  <div class="cars-list-container">
    <div class="cars-container">
      <%= render partial: 'cars/car_list', locals: { cars: @cars } %>
      <% if current_user %>
        <%= link_to 'Add New Car', new_car_path, class: 'add-car-button' %>
      <% end %>
    </div>
  </div>
  <div class="map-container" data-controller="map" data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>" data-map-markers-value='<%= @markers.to_json %>'>
    <div id="map"></div>
  </div>
</div>

<!-- Filters Modal -->
<div id="filters-modal" class="modal" data-controller="filter">
  <div class="modal-content">
    <span class="close" data-action="click->filter#close">&times;</span>
    <h2>Filters</h2>

    <h3>Instant Booking</h3>
    <label class="switch">
      <input type="checkbox" id="instant-booking">
      <span class="slider round"></span>
    </label>

    <h3>Number of Places</h3>
    <div>
      <label>Minimum number of places.</label>
      <div class="quantity">
        <button class="quantity-minus">-</button>
        <input type="number" id="number-of-places" value="2" min="1">
        <button class="quantity-plus">+</button>
      </div>
    </div>

    <h3>Recent Cars Only</h3>
    <label class="switch">
      <input type="checkbox" id="recent-cars">
      <span class="slider round"></span>
    </label>

    <h3>Equipment</h3>
    <div class="equipment">
      <button class="vehicle-type"><i class="fas fa-baby"></i> Baby seat</button>
      <button class="vehicle-type"><i class="fas fa-route"></i> GPS</button>
      <button class="vehicle-type"><i class="fas fa-snowflake"></i> Air conditioner</button>
      <button class="vehicle-type"><i class="fas fa-bicycle"></i> Bike rack</button>
      <!-- Add more equipment buttons as needed -->
      <button class="vehicle-type see-more" data-action="click->filter#toggleMoreEquipment">See more</button>
    </div>

    <h3>Gearbox</h3>
    <div class="gearbox">
      <label><input type="radio" name="gearbox" value="all" checked> All</label>
      <label><input type="radio" name="gearbox" value="manual"> Manual gearbox</label>
      <label><input type="radio" name="gearbox" value="automatic"> Automatic box</label>
    </div>

    <h3>Engine</h3>
    <div class="engine">
      <label><input type="checkbox" id="electric"> Electric</label>
      <label><input type="checkbox" id="hybrid"> Hybrid</label>
      <label><input type="checkbox" id="combustion"> Combustion</label>
    </div>

    <h3>Brand</h3>
    <div class="brand">
      <button class="vehicle-type">Renault</button>
      <button class="vehicle-type">Peugeot</button>
      <button class="vehicle-type">Mercedes-Benz</button>
      <!-- Add more brand buttons as needed -->
    </div>

    <button class="apply-button" data-action="click->filter#applyFilters">To research</button>
  </div>
</div>
